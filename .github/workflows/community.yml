name: Community Activity

on:
  issues:
    types: [opened, closed, reopened]
  pull_request:
    types: [opened, closed, reopened]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          submodules: recursive

      - name: Notify Discord
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          CHECKER=".uksf_tools/tools/notify_discord.py"
          if [ ! -f "$CHECKER" ]; then CHECKER="tools/notify_discord.py"; fi
          python3 "$CHECKER"
