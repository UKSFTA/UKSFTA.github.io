<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
  {{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}
</title>
<meta
  name="description"
  content="{{ .Description | default site.Params.description | default `UKSF Taskforce Alpha - High-fidelity Arma 3 Special Operations simulation.` }}"
/>
<!-- Open Graph / Social -->
<meta property="og:type" content="website" />
<meta
  property="og:title"
  content="{{ if .IsHome }}
    {{ site.Title }}
  {{ else }}
    {{ .Title }}
  {{ end }}"
/>
<meta
  property="og:description"
  content="{{ .Description | default site.Params.description | default `UKSF Taskforce Alpha - High-fidelity Arma 3 Special Operations simulation.` }}"
/>
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:site_name" content="UKSF Taskforce Alpha" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;700&family=Public+Sans:wght@400;700&display=swap"
  rel="stylesheet"
/>
{{ partial "head/css.html" . }}
{{ partial "head/js.html" . }}

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  
  // Default to denied for GDPR/GCMv2
  if (!localStorage.getItem('uksfta_consent')) {
      gtag('consent', 'default', {
          'ad_storage': 'denied',
          'ad_user_data': 'denied',
          'ad_personalization': 'denied',
          'analytics_storage': 'denied',
          'functional_storage': 'denied'
      });
  } else {
      try {
          const consent = JSON.parse(localStorage.getItem('uksfta_consent'));
          gtag('consent', 'default', {
              'ad_storage': consent.marketing ? 'granted' : 'denied',
              'ad_user_data': consent.marketing ? 'granted' : 'denied',
              'ad_personalization': consent.marketing ? 'granted' : 'denied',
              'analytics_storage': consent.analytics ? 'granted' : 'denied',
              'functional_storage': consent.functional ? 'granted' : 'denied'
          });
      } catch (e) {
          console.error("CONSENT_INIT_FAILURE", e);
      }
  }
</script>
